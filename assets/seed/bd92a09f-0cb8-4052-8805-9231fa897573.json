{"id": "bd92a09f-0cb8-4052-8805-9231fa897573", "type": "class", "data": "{\"code_str\": \"class Workspaces(z.Entity):\\n    def __init__(self, id=None, data=None):\\n        if id is None:\\n            id = '1314fdbf-b233-416a-b1f9-af14e104d098'\\n        if data is None:\\n            data = json.loads(one(world.db.execute(\\n                'select data from entities where id = ?',\\n                (id,)\\n            ).fetchall())['data'])\\n\\n        super().__init__('workspaces', id)\\n\\n        self.data = data\\n\\n        self.workspaces = {x.name: x for x in\\n                           world.apps['Entities'].get_entities('workspace')}\\n\\n        self.active_workspace = None\\n\\n        self.workspace_changed = z.Signal()\\n\\n        self.set_workspace(self.data['active_workspace'])\\n\\n    @classmethod\\n    def load(cls, id, data):\\n        return cls(id, data)\\n\\n    def dump_data(self):\\n        return {'active_workspace': self.active_workspace.name if self.active_workspace else None}\\n\\n\\n    def set_workspace(self, name):\\n        if self.active_workspace and name == self.active_workspace.name:\\n            return\\n        old = None\\n        if self.active_workspace:\\n            self.active_workspace.deactivate()\\n            old = self.active_workspace\\n        if name:\\n            workspace = self.workspaces[name]\\n            workspace.activate()\\n        else:\\n            workspace = None\\n        self.active_workspace = workspace\\n        self.save()\\n        self.workspace_changed.emit(old, workspace) # old, new\\n\\n    def drop(self):\\n        if self.active_workspace:\\n            self.active_workspace.deactivate()\\n\", \"name\": \"Workspaces\"}", "created_at": null, "updated_at": 1754736945.4911592}