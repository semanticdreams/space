{"id": "245", "type": "class", "data": "{\"code_str\": \"class Flex:\\n    def __init__(self, children, axis='x', reverse=None,\\n                 xspacing=0.5, yspacing=0.5, zspacing=0.5,\\n                 xalign='start', yalign='start', zalign='start',\\n                 name=None):\\n        self.name = name\\n        self.axis = z.Layout.parse_axis(axis)\\n        self.cross_axes = tuple(x for x in range(3) if x != self.axis)\\n        self.spacing = np.array((xspacing, yspacing, zspacing), float)\\n        self.children = children\\n        self.reverse = reverse if reverse is not None else (True if self.axis == 1 else False)\\n        self.alignment = (xalign, yalign, zalign)\\n        for child in self.children:\\n            assert isinstance(child, z.FlexChild), type(child)\\n        self.layout = z.Layout(children=[x.layout for x in self.children],\\n                             measurer=self.measurer, layouter=self.layouter, name='flex')\\n\\n    def measurer(self):\\n        if self.layout.children:\\n            [x.measurer() for x in self.layout.children]\\n            for axis in range(3):\\n                if self.axis == axis:\\n                    self.layout.measure[axis] = sum(x.measure[axis] for x in self.layout.children) \\\\\\n                            + self.spacing[axis] * (len(self.layout.children) - 1)\\n                else:\\n                    self.layout.measure[axis] = max(x.measure[axis] for x in self.layout.children)\\n\\n    def layouter(self):\\n        flex_sum = sum(x.flex for x in self.children)\\n        remaining = self.layout.size[self.axis] - self.spacing[self.axis] * (len(self.children) - 1)\\n        for child in self.children:\\n            if child.flex == 0:\\n                child.layout.size[self.axis] = child.layout.measure[self.axis]\\n                remaining -= child.layout.size[self.axis]\\n        if flex_sum:\\n            flex_base = remaining / flex_sum\\n            for child in self.children:\\n                if child.flex:\\n                    flex_base = max(flex_base, child.layout.measure[self.axis] / child.flex)\\n            for child in self.children:\\n                if child.flex:\\n                    child.layout.size[self.axis] = child.flex * flex_base\\n                    remaining -= child.layout.size[self.axis]\\n        offset = 0\\n        for child in self.children:\\n            for a in self.cross_axes:\\n                if self.alignment[a] == 'largest':\\n                    child.layout.size[a] = self.layout.size[a]\\n                else:\\n                    child.layout.size[a] = child.layout.measure[a]\\n            child.layout.rotation = self.layout.rotation.copy()\\n            child_position = np.array((0, 0, 0), float)\\n            child_position[self.axis] += self.layout.size[self.axis] \\\\\\n                    - offset - child.layout.size[self.axis] \\\\\\n                    if self.reverse else offset\\n            for a in self.cross_axes:\\n                if self.alignment[a] == 'center':\\n                    child_position[a] += (self.layout.size[a] - child.layout.size[a]) / 2\\n                elif self.alignment[a] == 'end':\\n                    child_position[a] += self.layout.size[a] - child.layout.size[a]\\n\\n            child.layout.position = self.layout.position + transformations.rotate_vector(\\n                child.layout.rotation, child_position)\\n            child.layout.depth_offset_index = self.layout.depth_offset_index\\n            child.layout.layouter()\\n            offset += child.layout.size[self.axis] + self.spacing[self.axis]\\n\\n    def set_children(self, children):\\n        self.children = children\\n        for child in self.children:\\n            assert isinstance(child, z.FlexChild), type(child)\\n        self.layout.set_children([x.layout for x in children])\\n\\n    def clear_children(self):\\n        self.children = []\\n        self.layout.clear_children()\\n\\n    def drop(self):\\n        self.layout.drop()\\n\", \"name\": \"Flex\"}", "created_at": null, "updated_at": 1754239007.5017562}