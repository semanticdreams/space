{"id": "350", "type": "class", "data": "{\"code_str\": \"import os\\nfrom OpenGL.GL import *\\nimport numpy as np\\nfrom PIL import Image\\nfrom ctypes import sizeof, c_float, c_void_p, c_uint, string_at\\n\\n\\nclass Pics:\\n    def __init__(self):\\n        self.program = world.shaders.build_program(world.shaders.find_shader('pic.vert'),\\n                                                   world.shaders.find_shader('pic.frag'))\\n\\n        self.projection_uniform = glGetUniformLocation(self.program, b'projection')\\n        self.view_uniform = glGetUniformLocation(self.program, b'view')\\n\\n        self.vao = glGenVertexArrays(1)\\n        self.vbo = glGenBuffers(1)\\n\\n        self.pics = []\\n\\n        glBindVertexArray(self.vao)\\n        glBindBuffer(GL_ARRAY_BUFFER, self.vbo)\\n\\n        glEnableVertexAttribArray(0)\\n        glEnableVertexAttribArray(1)\\n        stride = 5 * 4\\n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, stride, c_void_p(0))\\n        glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, stride, c_void_p(4 * 3))\\n\\n    def add_pic(self, pic):\\n        self.pics.append(pic)\\n\\n    def remove_pic(self, pic):\\n        self.pics.remove(pic)\\n\\n    def render(self, view, projection):\\n        glBindVertexArray(self.vao)\\n\\n        glBindBuffer(GL_ARRAY_BUFFER, self.vbo)\\n\\n        glUseProgram(self.program)\\n\\n        glUniformMatrix4fv(self.projection_uniform, 1, GL_FALSE, projection)\\n        glUniformMatrix4fv(self.view_uniform, 1, GL_FALSE, view)\\n\\n        glActiveTexture(GL_TEXTURE0)\\n\\n        for pic in self.pics:\\n            if pic.vertices is not None:\\n                glBufferData(GL_ARRAY_BUFFER, 4 * len(pic.vertices), pic.vertices, GL_STREAM_DRAW)\\n                glBindTexture(GL_TEXTURE_2D, pic.texture_id)\\n                glDrawArrays(GL_TRIANGLES, 0, int(len(pic.vertices) / 5))\", \"name\": \"Pics\"}", "created_at": null, "updated_at": 1751906432.7478254}