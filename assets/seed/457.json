{"id": "457", "type": "class", "data": "{\"code_str\": \"class EntityMorphView:\\n    def __init__(self, focus_parent=world.focus):\\n        self.focus = focus_parent.add_child(self)\\n        self.actions_panel = z.ActionsPanel([\\n            ('paste source entity', self.paste_source_entity_triggered),\\n        ], focus_parent=self.focus)\\n        self.entity_label = z.Label()\\n        self.search_view = z.SearchView([], focus_parent=self.focus)\\n        self.search_view.submitted.connect(self.on_submitted)\\n        self.result_entity_label = z.Label()\\n        self.column = z.Flex([\\n            z.FlexChild(self.actions_panel.layout),\\n            z.FlexChild(self.entity_label.layout),\\n            z.FlexChild(self.search_view.layout, flex=1),\\n            z.FlexChild(self.result_entity_label.layout),\\n        ], axis='y', xalign='largest')\\n        self.layout = self.column.layout\\n\\n        self.source_entity = None\\n        self.result_entity = None\\n\\n    def paste_source_entity_triggered(self):\\n        self.result_entity_label.set_text('')\\n        assert Y.register_type == 'entity', Y.register_type\\n        self.source_entity = Y.value\\n        self.entity_label.set_text(str(self.source_entity))\\n        morphs = world.apps['Entities'].morphs.get(self.source_entity.type, [])\\n        self.search_view.set_items([(x, x[0]) for x in morphs])\\n\\n    def on_submitted(self, item):\\n        target_type, morph_cls = item[0]\\n        self.result_entity = morph_cls(self.source_entity)()\\n        self.result_entity_label.set_text(str(self.result_entity))\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.search_view.drop()\\n        self.actions_panel.drop()\\n        self.entity_label.drop()\\n        self.result_entity_label.drop()\\n        self.focus.drop()\\n\", \"name\": \"EntityMorphView\"}", "created_at": null, "updated_at": 1756754129.7281702}