{"id": "367", "type": "class", "data": "{\"code_str\": \"class Hud:\\n    def __init__(self):\\n        self.camera = world.camera['identity']\\n       # self.camera.changed.connect(self.update_transform) (should be unnecessary for identity camera)\\n\\n        world.hud_projection.changed.connect(self.hud_projection_changed)\\n\\n        self.top_panel = z.HudPanel(color=(0.1, 0.1, 0.1, 1))\\n        self.bottom_panel = z.HudPanel(color=world.themes.theme.green[700])\\n\\n        self.launcher_button = z.Button('icon:dashboard', hud=True, focusable=False, on_click=lambda f, i, d: world.apps['LauncherApp'].open_launcher())\\n        self.top_spacer = z.Spacer()\\n        self.top_panel.add(self.launcher_button)\\n        self.top_panel.add(self.top_spacer, flex=1)\\n\\n        self.snackbar_host = z.SnackbarHost()\\n\\n        self.worktop = z.Worktop()\\n\\n        self.layout = z.Layout(children=[self.top_panel.layout,\\n                                                 self.bottom_panel.layout,\\n                                                 self.snackbar_host.layout,\\n                                                 self.worktop.layout],\\n                                       measurer=self.measurer,\\n                                       layouter=self.layouter,\\n                                       name='hud')\\n        self.hud_projection_changed()\\n\\n        self.layout_root = z.LayoutRoot()\\n        self.layout.set_root(self.layout_root)\\n        self.layout.mark_measure_dirty()\\n\\n        world.updated.connect(self.update)\\n\\n    def update(self, dt):\\n        self.layout_root.update()\\n\\n    def measurer(self):\\n        [x.measurer() for x in self.layout.children]\\n        self.layout.measure = np.array((0.0, 0.0, 0.0))\\n\\n    def layouter(self):\\n        for child in self.layout.children:\\n            child.size = np.array((self.alignment.width, 5, 0), float)\\n            child.depth_offset_index = self.layout.depth_offset_index\\n\\n        position = self.camera.position\\n        rotation = self.camera.rotation\\n\\n        offset = -np.array(self.alignment.align_to_viewport([0, self.top_panel.layout.size[1], 0]))\\n        self.top_panel.layout.position = transformations.rotate_vector(rotation, np.array(offset)) + position\\n\\n        offset = (-self.alignment.width/2, -self.alignment.height/2, -150)\\n        self.bottom_panel.layout.position = transformations.rotate_vector(rotation, np.array(offset)) + position\\n\\n        self.snackbar_host.layout.size[0] = 60\\n        self.snackbar_host.layout.size[1] = self.snackbar_host.layout.measure[1]\\n        offset = (-self.alignment.width/2, -self.alignment.height/2 \\\\\\n            + self.bottom_panel.layout.size[1] + 0.3, -150)\\n        self.snackbar_host.layout.position = transformations.rotate_vector(rotation, np.array(offset)) + position\\n\\n        # worktop\\n        self.worktop.layout.size = np.array((\\n            self.alignment.width - 0.3 * 2, self.alignment.height - (5 * 2 + 0.6), 0\\n        ))\\n        offset = np.array((\\n            -self.alignment.width/2 - 0.3, -self.alignment.height/2 + self.bottom_panel.layout.size[1] + 0.3, -150\\n        ))\\n        self.worktop.layout.position = transformations.rotate_vector(rotation, offset) + position\\n\\n        self.snackbar_host.layout.rotation = self.top_panel.layout.rotation = self.bottom_panel.layout.rotation = self.worktop.layout.rotation = rotation\\n\\n        for child in self.layout.children:\\n            child.layouter()\\n\\n    def hud_projection_changed(self):\\n        self.alignment = z.ViewportAlignment(150, projection=world.hud_projection)\\n        self.layout.mark_measure_dirty()\\n\\n    def drop(self):\\n        world.updated.disconnect(self.update)\\n        self.layout.drop()\\n        self.snackbar_host.drop()\\n        self.top_panel.drop()\\n        self.top_spacer.drop()\\n        self.bottom_panel.drop()\\n        self.launcher_button.drop()\\n\", \"name\": \"Hud\"}", "created_at": null, "updated_at": 1754239007.5015283}