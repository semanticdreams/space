{"id": "139", "type": "class", "data": "{\"code_str\": \"class ClassesView:\\n    def __init__(self):\\n        self.focus = world.focus.add_child(self)\\n\\n        self.create_class_button = z.Button('+', focus_parent=self.focus)\\n        self.create_class_button.clicked.connect(self.create_class_clicked)\\n\\n        self.reload_button = z.Button('reload', focus_parent=self.focus)\\n        self.reload_button.clicked.connect(self.reload_clicked)\\n\\n        self.head = z.Flex(\\n            children=[\\n                z.FlexChild(self.create_class_button.layout),\\n                z.FlexChild(self.reload_button.layout),\\n            ]\\n        )\\n\\n        self.search_view = z.SearchView(items=[], builder=self.search_view_item_builder,\\n                                                focus_parent=self.focus, show_head=False)\\n\\n        self.column = z.Flex([\\n        z.FlexChild(self.head.layout), z.FlexChild(self.search_view.layout, flex=1)], axis='y', xalign='largest')\\n\\n        self.layout = self.column.layout\\n\\n        self.update_items()\\n\\n        world.focus.set_focus(self.search_view.focus)\\n\\n    def update_items(self):\\n        #items = [(x, x['name']) for x in world.classes.codes.values()]\\n        items = [(x, x.name) for x in z.ClassEntity.all()]\\n        self.search_view.set_items(items)\\n\\n    def reload_clicked(self, f, i, d):\\n        self.update_items()\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.search_view.drop()\\n        self.head.drop()\\n        self.create_class_button.drop()\\n        self.reload_button.drop()\\n        self.focus.drop()\\n\\n    def create_class_clicked(self, f, i, d):\\n        class_entity = z.ClassEntity.create()\\n        #class_code = world.classes.create_class_code(lang='py')\\n        self.update_items()\\n        #ClassView = world.classes.get_class(name='ClassView')\\n        #world.floaties.add(ClassView(class_code))\\n        world.floaties.add(\\n            code_entity=z.CodeEntity.create(\\n                code_str=f'z.ClassEntityView(z.Entity.get(\\\"{class_entity.id}\\\"))'\\n            )\\n        )\\n\\n    def get_triggered(self, cls):\\n        world.floaties.drop_obj(self)\\n        world.floaties.add(\\n            code_entity=z.CodeEntity.create(\\n                code_str=f'z.ClassEntityView(z.Entity.get(\\\"{cls.id}\\\"))'\\n            )\\n        )\\n\\n    def search_view_item_builder(self, item, context):\\n        b = z.ContextButton(label=item[1], focus_parent=context['focus_parent'], color=(0.4, 0.9, 0.4, 1),\\n                   actions=[\\n                       ('get', lambda: self.get_triggered(item[0])),\\n                   ])\\n        return b\\n\", \"name\": \"ClassesView\"}", "created_at": null, "updated_at": 1754239007.5070796}