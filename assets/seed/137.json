{"id": "137", "type": "class", "data": "{\"code_str\": \"class SubprocessKernelView:\\n    def __init__(self, kernel):\\n        self.kernel = kernel\\n        self.name = z.ReactiveValue(self.make_name())\\n        self.focus = world.focus.add_child(self)\\n        self.name_input = z.Input(text=self.kernel.name or '', focus_parent=self.focus)\\n        self.name_input.submitted.connect(self.name_submitted)\\n        actions = [\\n            ('env', self.env_triggered),\\n            ('delete', self.delete_triggered),\\n            ('status', self.update_status),\\n            ('start', self.kernel.start_kernel),\\n            ('stop', self.kernel.stop_kernel),\\n            ('wait-for-stopped', self.kernel.wait_for_kernel_stopped),\\n        ]\\n        self.actions_panel = z.ActionsPanel(actions, self.focus)\\n        self.row = z.Flex(children=[\\n            z.FlexChild(self.name_input.layout),\\n            z.FlexChild(self.actions_panel.layout)\\n        ])\\n\\n        self.cmd_input = z.Input(text=self.kernel.cmd or '', focus_parent=self.focus)\\n        self.cmd_input.submitted.connect(self.cmd_submitted)\\n        self.cwd_input = z.Input(text=self.kernel.cwd or '', focus_parent=self.focus)\\n        self.cwd_input.submitted.connect(self.cwd_submitted)\\n\\n        self.status_label = z.Label('status: ')\\n\\n        self.column = z.Flex(xalign='largest', axis='y', children=[\\n            z.FlexChild(self.row.layout),\\n            z.FlexChild(self.cmd_input.layout),\\n            z.FlexChild(self.cwd_input.layout),\\n            z.FlexChild(self.status_label.layout),\\n        ])\\n        self.layout = self.column.layout\\n\\n        self.update_status()\\n\\n    def update_status(self):\\n        status_str = self.kernel.status\\n        if self.kernel.status == 'started':\\n            if self.kernel.is_kernel_alive():\\n                status_str += ', alive'\\n            else:\\n                status_str += ', dead'\\n        self.status_label.text.set(f'status: {status_str}')\\n\\n    def make_name(self):\\n        return f'kernel: {self.kernel.id} {self.kernel.name}'\\n\\n    def raise_for_internal_kernel(self):\\n        if self.kernel.id == 0:\\n            raise Exception('can\\\\'t change internal kernel')\\n\\n    def env_triggered(self):\\n        world.floaties.add(world.classes.get_class(name='PyDictView')(self.kernel.env))\\n\\n    def delete_triggered(self):\\n        self.raise_for_internal_kernel()\\n        self.kernel.delete_kernel()\\n        world.floaties.drop_obj(self)\\n\\n    def name_submitted(self):\\n        self.raise_for_internal_kernel()\\n        self.kernel.update_data(name=self.name_input.text)\\n        self.name.set(self.make_name())\\n\\n    def cmd_submitted(self):\\n        self.raise_for_internal_kernel()\\n        self.kernel.update_data(cmd=self.cmd_input.text)\\n\\n    def cwd_submitted(self):\\n        self.raise_for_internal_kernel()\\n        self.kernel.update_data(cwd=self.cwd_input.text)\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.cmd_input.drop()\\n        self.cwd_input.drop()\\n        self.status_label.drop()\\n        self.row.drop()\\n        self.name_input.drop()\\n        self.actions_panel.drop()\\n        self.focus.drop()\", \"name\": \"SubprocessKernelView\"}", "created_at": null, "updated_at": 1754736945.4593353}