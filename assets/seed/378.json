{"id": "378", "type": "class", "data": "{\"code_str\": \"class VimMode:\\n    def __init__(self, name):\\n        self.name = name\\n        self.action_groups = {}\\n        self._key_map = {}\\n\\n    def _update_key_map(self):\\n        self._key_map.clear()\\n        for name, action_group in self.action_groups.items():\\n            for action in action_group.actions:\\n                self._key_map[action.key] = action\\n        world.vim.current_mode_changed.emit()\\n\\n    def on_enter(self):\\n        pass\\n\\n    def on_leave(self):\\n        pass\\n\\n    def add_action_group(self, action_group):\\n        self.action_groups[action_group.name] = action_group\\n        self._update_key_map()\\n\\n    def remove_action_group(self, name):\\n        del self.action_groups[name]\\n        self._update_key_map()\\n\\n    def on_character(self, key):\\n        pass\\n\\n    def on_keyboard(self, key, scancode, action, mods):\\n        mod_keys = (\\n            sdl2.SDLK_LCTRL,\\n            sdl2.SDLK_RCTRL,\\n            sdl2.SDLK_LSHIFT,\\n            sdl2.SDLK_RSHIFT,\\n            sdl2.SDLK_LALT,\\n            sdl2.SDLK_RALT,\\n            sdl2.SDLK_LGUI,   # Left \\\"Windows\\\" / \\\"Command\\\" key\\n            sdl2.SDLK_RGUI,   # Right \\\"Windows\\\" / \\\"Command\\\" key\\n            sdl2.SDLK_MODE    # AltGr (if used)\\n        )\\n        if action == 1 and (mods == 0 or key in mod_keys):\\n            if key in self._key_map:\\n                self._key_map[key].func()\\n\\n    def on_controller_button_down(self, button):\\n        pass\\n\\n    def on_controller_button_up(self, button):\\n        pass\\n\\n    def on_controller_motion(self, axis, value):\\n        pass\\n\", \"name\": \"VimMode\"}", "created_at": null, "updated_at": 1751906432.7471554}