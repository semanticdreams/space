{"id": "459", "type": "class", "data": "{\"code_str\": \"import os\\nclass ClassEntity(z.Entity):\\n    def __init__(self, id, code_str, name=''):\\n        super().__init__('class', id)\\n        self.code_str = code_str\\n        self.name = name\\n        self.label = self.name\\n\\n        self.view = z.ClassEntityView\\n        self.preview = z.ClassEntityPreview\\n        self.color = (0.5, 0.1, 0.1, 1)\\n\\n    @classmethod\\n    def create(cls, name='', code_str='', id=None):\\n        id = super().create('class', {'name': name, 'code_str': code_str}, id=id)\\n        o = cls(id, code_str, name)\\n        o.save_to_file()\\n        return o\\n\\n    @classmethod\\n    def load(cls, id, data):\\n        return cls(id, data['code_str'], data['name'])\\n\\n    @classmethod\\n    def all(cls):\\n        return world.apps['Entities'].get_entities('class')\\n\\n    @classmethod\\n    def find(cls, name):\\n        entity = world.apps['Entities'].get_entity(\\n            world.classes.names[name]['id'])\\n        return entity\\n\\n    def clone(self):\\n        return ClassEntity.create(\\n            name=self.name,\\n            code_str=self.code_str\\n        )\\n\\n    def dump_data(self):\\n        return {\\n            'code_str': self.code_str,\\n            'name': self.name\\n        }\\n\\n    def save(self, to_file=True):\\n        super().save()\\n        if to_file:\\n            self.save_to_file()\\n\\n    def save_to_file(self, reload_world_classes=True):\\n        path = os.path.join(world.assets_path, 'python/z',\\n                            f'{self.name}({self.id}).py')\\n        with open(path, 'w') as f:\\n            f.write(self.code_str)\\n        if reload_world_classes:\\n            world.classes.reload()\\n\\n    def delete(self):\\n        super().delete()\\n        path = os.path.join(world.assets_path, 'python/z',\\n                            f'{self.name}({self.id}).py')\\n        os.remove(path)\\n        world.classes.reload()\\n\\n    def eval(self):\\n        env = {}\\n        exec(self.code_str, env)\\n        return env.pop(self.name)\\n\", \"name\": \"ClassEntity\"}", "created_at": null, "updated_at": 1754239007.5037003}