{"id": "183c6710-1ea7-4599-87a5-1e8c480b6494", "type": "class", "data": "{\"code_str\": \"class FSFolderEntityView:\\n    def __init__(self, entity, focus_parent=None):\\n        self.focus = (focus_parent or world.focus).add_child(self)\\n        self.entity = entity\\n\\n        self.actions_panel = z.ActionsPanel([\\n            ('copy entity', self.entity.copy),\\n            ('delete', self.entity.delete),\\n        ], focus_parent=self.focus)\\n\\n        val = self.entity.get_path()\\n        self.base_input = z.Input('' if self.entity.base is None else self.entity.base,\\n                                  focus_parent=self.focus)\\n        self.base_input.submitted.connect(self.on_base_input_submitted)\\n\\n        self.input = z.Input('' if val is None else val, focus_parent=self.focus)\\n        self.input.submitted.connect(self.on_input_submitted)\\n\\n        self.list_view = z.ListView(builder=self.list_view_builder,\\n                                    focus_parent=self.focus)\\n\\n        self.row = z.Flex([\\n            z.FlexChild(self.base_input.layout),\\n            z.FlexChild(self.input.layout),\\n        ], yalign='largest')\\n\\n        self.column = z.Flex([\\n            z.FlexChild(self.actions_panel.layout),\\n            z.FlexChild(self.row.layout),\\n            z.FlexChild(self.list_view.layout, flex=1),\\n        ], axis='y', xalign='largest')\\n\\n        self.layout = self.column.layout\\n\\n        self.update_items()\\n\\n    def list_view_builder(self, item, context):\\n        return z.ContextButton(\\n            label=item,\\n            focus_parent=context['focus_parent'],\\n            actions=[\\n                ('edit', lambda: world.floaties.add(\\n                    z.Editor(os.path.join(self.entity.get_full_path(), item)))),\\n            ]\\n        )\\n\\n    def update_items(self):\\n        path = self.entity.get_full_path()\\n        names = os.listdir(path)\\n        self.list_view.set_items(names)\\n\\n    def __str__(self):\\n        return str(self.entity)\\n\\n    def on_input_submitted(self):\\n        val = self.input.text or None\\n        self.entity.set_path(val)\\n        self.input.set_text('' if val is None else val)\\n        self.update_items()\\n\\n    def on_base_input_submitted(self):\\n        val = self.base_input.text\\n        self.entity.set_base(val if val else None)\\n        self.update_items()\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.row.drop()\\n        self.list_view.drop()\\n        self.actions_panel.drop()\\n        self.base_input.drop()\\n        self.input.drop()\\n        self.focus.drop()\\n\\n\", \"name\": \"FSFolderEntityView\"}", "created_at": 1752228072.8986723, "updated_at": 1756754129.7235394}