{"id": "309", "type": "class", "data": "{\"code_str\": \"import math\\n\\n\\nclass Pagination:\\n    def __init__(self, num_items=0, per_page=5, focus_parent=None):\\n        self.focus = (focus_parent or world.focus).add_child(self)\\n        self.first_button = z.Button('icon:first_page', focus_parent=self.focus, on_click=self.first_clicked)\\n        self.prev_button = z.Button('icon:chevron_left', focus_parent=self.focus, on_click=self.previous_clicked)\\n        self.next_button = z.Button('icon:chevron_right', focus_parent=self.focus, on_click=self.next_clicked)\\n        self.last_button = z.Button('icon:last_page', focus_parent=self.focus, on_click=self.last_clicked)\\n\\n        style = z.TextStyle(color=world.themes.theme.gray[200], scale=1.5)\\n\\n        self.page_label = z.Label(text_style=style)\\n        self.items_label = z.Label(text_style=style)\\n\\n        self.spacer = z.Spacer()\\n\\n        self.row = z.Flex(children=[\\n            z.FlexChild(self.first_button.layout),\\n            z.FlexChild(self.prev_button.layout),\\n            z.FlexChild(self.page_label.layout),\\n            z.FlexChild(self.spacer.layout, flex=1),\\n            z.FlexChild(self.items_label.layout),\\n            z.FlexChild(self.next_button.layout),\\n            z.FlexChild(self.last_button.layout)\\n        ], yalign='center')\\n\\n        self.layout = self.row.layout\\n\\n        self.num_items = num_items\\n        self.current_page = None\\n        self.per_page = per_page\\n\\n        self.page_changed = z.Signal()\\n\\n    def set_page(self, page, force_update=False):\\n        max_page = (self.num_items - 1) // self.per_page\\n        new_page = max(0, min(max_page, page))\\n\\n        if page == self.current_page and not force_update:\\n            return\\n\\n        self.current_page = new_page\\n        start_index = self.current_page * self.per_page\\n        stop_index = (self.current_page + 1) * self.per_page\\n\\n        self.page_label.text.set(\\n            f'page: {new_page} / {max_page}')\\n        self.items_label.text.set(\\n            f'items: {start_index} - {stop_index-1} / {self.num_items-1}')\\n\\n        self.page_changed.emit(\\n            dict(page=self.current_page,\\n                 slice=(start_index, stop_index)))\\n\\n    def set_num_items(self, num_items):\\n        self.num_items = num_items\\n        self.set_page(0, force_update=True)\\n\\n    def first_clicked(self, p, r, i):\\n        self.set_page(0)\\n\\n    def last_clicked(self, p, r, i):\\n        self.set_page(math.inf)\\n\\n    def previous_clicked(self, p, r, i):\\n        self.set_page(self.current_page - 1)\\n\\n    def next_clicked(self, p, r, i):\\n        self.set_page(self.current_page + 1)\\n\\n    def drop(self):\\n        self.row.drop()\\n        self.spacer.drop()\\n        self.first_button.drop()\\n        self.last_button.drop()\\n        self.next_button.drop()\\n        self.prev_button.drop()\\n        self.page_label.drop()\\n        self.items_label.drop()\\n        self.focus.drop()\", \"name\": \"Pagination\"}", "created_at": null, "updated_at": 1754736945.451349}