{"id": "c9ab719e-b1c8-49e2-bdd7-d4576c537a6b", "type": "class", "data": "{\"code_str\": \"class GraphEntityNodeNodeView:\\n    def __init__(self, node, focus_parent=world.focus):\\n        self.node = node\\n        self.focus = focus_parent.add_child(self)\\n\\n        self.title = z.Button(str(self.node.entity), centered=False, wrap=False,\\n                              background_color=self.node.entity.color)\\n\\n        self.copy_button = z.ContextButton(label='c', actions=[\\n            ('copy', self.node.entity.copy),\\n            ('copy id', lambda: Y(self.node.entity.id)),\\n            ('sys copy id', lambda: world.apps['Clipboard'].set_text(\\n                self.node.entity.id)),\\n        ])\\n\\n        self.remove_child_button = z.ContextButton(label='-', actions=[\\n            ('remove-child', self.on_remove_child_triggered),\\n        ])\\n\\n        self.create_child_button = z.ContextButton(label='+', actions=[\\n            ('create-child-same', self.on_create_child_triggered),\\n            ('create-child-different', self.on_create_different_child_triggered),\\n\\n        ])\\n\\n        self.meta_row = z.Flex([\\n            z.FlexChild(self.title.layout, flex=1),\\n            z.FlexChild(self.copy_button.layout),\\n            z.FlexChild(self.remove_child_button.layout),\\n            z.FlexChild(self.create_child_button.layout),\\n        ], yalign='largest')\\n\\n        if self.node.entity.view:\\n            self.entity_view_obj = self.node.entity.view(self.node.entity)\\n        else:\\n            self.entity_view_obj = z.Label('entity has no view')\\n\\n        self.column = z.Flex([\\n            z.FlexChild(self.meta_row.layout),\\n            z.FlexChild(self.entity_view_obj.layout),\\n        ], axis='y', xalign='largest')\\n\\n        self.layout = self.column.layout\\n\\n    def on_remove_child_triggered(self):\\n        self.node.remove_child()\\n\\n    def on_create_child_triggered(self):\\n        self.node.create_child()\\n\\n    def on_create_different_child_triggered(self):\\n        def on_submitted(item):\\n            new_entity = item[0].create()\\n            self.node.graph_entity.add_node(new_entity)\\n            self.node.graph_entity.add_edge(\\n                self.node.entity, new_entity)\\n            self.node.graph_entity.save()\\n            world.floaties.drop_obj(create_entity_view)\\n        create_entity_view = z.CreateEntityView(\\n            on_submitted=on_submitted)\\n        world.floaties.add(create_entity_view)\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.meta_row.drop()\\n        self.title.drop()\\n        self.copy_button.drop()\\n        self.create_child_button.drop()\\n        self.remove_child_button.drop()\\n        self.entity_view_obj.drop()\\n        self.focus.drop()\\n\", \"name\": \"GraphEntityNodeNodeView\"}", "created_at": null, "updated_at": 1756754129.7291455}