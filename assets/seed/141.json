{"id": "141", "type": "class", "data": "{\"code_str\": \"class CodesView:\\n    def __init__(self):\\n        self.focus = world.focus.add_child(self)\\n        self.name = z.ReactiveValue('codes')\\n        actions = [\\n            ('create code', self.on_create_code_triggered),\\n            ('reload', self.update_items),\\n        ]\\n        self.buttons = []\\n        for name, func in actions:\\n            button = z.Button(name, focus_parent=self.focus)\\n            button.clicked.connect(lambda f, i, d, func=func: func())\\n            self.buttons.append(button)\\n        self.spacer = z.Spacer()\\n        self.head = z.Flex(children=[\\n            *[z.FlexChild(x.layout) for x in self.buttons],\\n            z.FlexChild(self.spacer.layout, flex=1)\\n        ])\\n        self.search_view = z.SearchView(\\n            builder=self.search_view_item_builder, items=[], focus_parent=self.focus, show_head=False)\\n        self.column = z.Flex([\\n            z.FlexChild(self.head.layout),\\n            z.FlexChild(self.search_view.layout)\\n        ], axis='y', xalign='largest')\\n        self.layout = self.column.layout\\n\\n        self.update_items()\\n\\n    def search_view_item_builder(self, item, context):\\n        CodeView = world.classes.get_class(name='CodeView')\\n        b = z.ContextButton(label=item[1], focus_parent=context['focus_parent'], color=(0.4, 0.9, 0.4, 1),\\n                   actions=[\\n                       ('get', lambda: world.floaties.add(CodeView(item[0]))),\\n                   ])\\n        return b\\n\\n    def on_create_code_triggered(self):\\n        world.codes.create_code()\\n        self.update_items()\\n\\n    def update_items(self):\\n        codes = world.codes.get_codes()\\n        items = [(x, x['name']) for x in codes]\\n        self.search_view.set_items(items)\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.head.drop()\\n        self.spacer.drop()\\n        self.search_view.drop()\\n        for button in self.buttons:\\n            button.drop()\\n        self.focus.drop()\\n\", \"name\": \"CodesView\"}", "created_at": null, "updated_at": 1756754129.7294092}