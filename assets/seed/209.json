{"id": "209", "type": "class", "data": "{\"code_str\": \"import time\\nclass LayoutStatsView:\\n    def __init__(self, lt):\\n        self.lt = lt\\n\\n        self.focus = world.focus.add_child(self)\\n        self.name = z.ReactiveValue(f'layout-stats: {self.lt}')\\n\\n        self.label = z.Label('')\\n\\n        self.column = z.Flex([self.label], axis='y', xalign='largest')\\n        self.layout = self.column.layout\\n\\n        self.reload()\\n\\n        self.interval = world.apps['Time'].set_interval(self.reload, 1000)\\n\\n    def reload(self):\\n        counts = [\\n            self.agg_counts(self.lt.measure_times),\\n            self.agg_counts(self.lt.layout_times),\\n            self.agg_counts(self.lt.transform_times),\\n        ]\\n        self.label.text.set('\\\\n'.join((' '.join((str(x) for x in y[0])) + ' | ' + ' '.join((str(round(max(x), 3)) for x in y[1])) for y in counts)))\\n\\n    def agg_counts(self, times):\\n        counts = [0] * 10\\n        deltas = [[0]] * 10\\n        start_time = int(time.time()) - 9\\n        for t0, t1 in times:\\n            sec = int(t0)\\n            if sec >= start_time:\\n                counts[sec - start_time] += 1\\n                deltas[sec - start_time].append(t1 - t0)\\n        return counts, deltas\\n\\n    def drop(self):\\n        world.apps['Time'].remove_interval(self.interval)\\n        self.column.drop()\\n        self.label.drop()\\n        self.focus.drop()\\n\", \"name\": \"LayoutStatsView\"}", "created_at": null, "updated_at": 1756754129.7263365}