{"id": "359", "type": "class", "data": "{\"code_str\": \"import json\\n\\n\\nclass CameraApp:\\n    def __init__(self):\\n        self.world = world\\n        self.world.camera = self\\n        self.camera = z.Camera(np.array([0, 0, 0], float),\\n                             np.array([1, 0, 0, 0], float))\\n        self.fpc = z.FirstPersonControls(camera=self.camera, window=self.world.window)\\n\\n        self.box_selector = z.CameraBoxSelector()\\n\\n        self.cameras = {\\n            'default': self.camera,\\n            'identity': z.Camera(np.array([0, 0, 0], float), np.array([1, 0, 0, 0], float))\\n        }\\n\\n        world.vim.add_mode(z.CameraVimMode())\\n        world.vim.modes['leader'].add_action_group(z.VimActionGroup('camera', [\\n            z.VimAction('camera', self.set_camera_vim_mode, sdl2.SDLK_k),\\n        ]))\\n\\n        self.load_camera()\\n        self.debounced_camera_position = z.DebouncedCameraPosition()\\n        self.debounced_camera_position.changed.connect(self.camera_changed)\\n\\n        world.audio.set_listener_position(self.camera.position.tolist())\\n\\n    def set_camera_vim_mode(self):\\n        world.vim.set_current_mode('camera')\\n\\n    def __getitem__(self, key):\\n        return self.cameras[key]\\n\\n    def load_camera(self):\\n        data = world.db.execute('select * from cameras where id = 0').fetchall()[0]\\n        self.camera.set_position(json.loads(data['position']))\\n        self.camera.set_rotation(json.loads(data['rotation']))\\n\\n    def camera_changed(self):\\n        with world.db:\\n            world.db.execute('update cameras set position = ?, rotation = ? where id = ?',\\n                       (json.dumps(self.camera.position.tolist()),\\n                        json.dumps(self.camera.rotation.tolist()),\\n                        0))\\n        world.audio.set_listener_position(self.camera.position.tolist())\\n\\n    def drop(self):\\n        pass\\n\", \"name\": \"CameraApp\"}", "created_at": null, "updated_at": 1754239007.507207}