{"id": "453", "type": "class", "data": "{\"code_str\": \"class CodeEntityPreview:\\n    def __init__(self, entity, focus_parent=None):\\n        self.entity = entity\\n        name_display = self.entity.name if self.entity.name else f\\\"Code {self.entity.id}\\\"\\n\\n        self.button = z.ContextButton(\\n            label=f\\\"code: {name_display} ({self.entity.lang})\\\",\\n            focus_parent=focus_parent,\\n            font_scale=5,\\n            actions=[\\n                ('view', lambda: world.floaties.add(\\n                    self.entity.view(self.entity))),\\n                ('run', lambda: self.entity.run()),\\n                ('edit', self.edit_code),\\n            ]\\n        )\\n        self.layout = self.button.layout\\n\\n    def edit_code(self):\\n        new_code = world.dialogs.edit_string(self.entity.code_str).strip()\\n        if new_code != self.entity.code_str:\\n            self.entity.code_str = new_code\\n            self.entity.save()\\n\\n    def drop(self):\\n        self.button.drop()\\n\", \"name\": \"CodeEntityPreview\"}", "created_at": null, "updated_at": 1751906432.746784}