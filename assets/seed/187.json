{"id": "187", "type": "class", "data": "{\"code_str\": \"from collections import defaultdict\\nclass VimIndicator:\\n    def __init__(self):\\n        if world.states.is_state_active(world.vim.state):\\n            self.vim_state_entered()\\n        world.vim.entered.connect(self.vim_state_entered)\\n        world.vim.left.connect(self.vim_state_left)\\n\\n    def vim_state_entered(self):\\n        self.label = z.Label(hud=True, color=world.themes.theme.grey[900])\\n        world.apps['Hud'].bottom_panel.add(self.label)\\n        self.current_vim_changed()\\n        world.vim.current_mode_changed.connect(self.current_vim_changed)\\n\\n    def vim_state_left(self):\\n        world.vim.current_mode_changed.disconnect(self.current_vim_changed)\\n        world.apps['Hud'].bottom_panel.remove(self.label)\\n        self.label.drop()\\n\\n    def current_vim_changed(self):\\n        mode = world.vim.current_mode\\n        info = defaultdict(dict)\\n        actions = [y for x in mode.action_groups.values() for y in x.actions]\\n        entries = [f'[{chr(x.key if x.key < 0x110000 else 32)}] {x.name}' for x in actions]\\n        width = max((len(x) for x in entries)) if entries else 0\\n        text = ' '.join((f'{x:<{1 + width}}' for x in entries))\\n        self.label.text.set(text)\\n\\n    def drop(self):\\n        pass\\n\", \"name\": \"VimIndicator\"}", "created_at": null, "updated_at": 1751906432.7402349}