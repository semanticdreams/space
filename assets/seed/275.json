{"id": "275", "type": "class", "data": "{\"code_str\": \"import json\\nimport base58\\n\\nfrom solders.keypair import Keypair\\nfrom solders.pubkey import Pubkey\\nfrom solana.rpc.types import TokenAccountOpts\\nfrom solana.rpc.api import Client\\nfrom solana.rpc.websocket_api import connect\\n\\n\\nclass Solana:\\n    def __init__(self, privkey):\\n        self.privkey = privkey\\n        self.sol_client = Client(\\\"https://api.mainnet-beta.solana.com\\\")\\n        self.raydium_program_id = '675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8'\\n\\n    def _keys_from_array(self, array):\\n        secret_key = key_array[0:32]\\n        public_key = key_array[32:64]\\n        sk = base58.b58encode(bytes(secret_key))\\n        pk = base58.b58encode(bytes(public_key))\\n        return sk, pb\\n\\n    def _keys_str_to_array(self, keys_str):\\n        return [x for x in base58.b58decode(keys_str)]\\n\\n    #def get_trading_wallet_privkey(self):\\n    #    return world.secrets.get('solana-privkey')\\n\\n    def get_trading_wallet_keypair(self):\\n        #privkey = self.get_trading_wallet_privkey()\\n        keypair = Keypair.from_base58_string(self.privkey)\\n        return keypair\\n\\n    def get_trading_wallet_balance(self):\\n        keypair = self.get_trading_wallet_keypair()\\n        pubkey = keypair.pubkey()\\n        balance = self.sol_client.get_balance(pubkey).value\\n        return balance / 1_000_000_000\\n\\n    def get_tokens(self):\\n        token_program_id = 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA'\\n        response = self.sol_client.get_token_accounts_by_owner_json_parsed(\\n                self.get_trading_wallet_keypair().pubkey(), TokenAccountOpts(\\n                program_id=Pubkey.from_string(self.raydium_program_id))).to_json()\\n        json_response = json.loads(response)\\n        return json_response['result']['value']\\n\\n    async def get_transactions(self):\\n        async with connect(\\\"wss://api.devnet.solana.com\\\") as websocket:\\n            await websocket.logs_subscribe()\\n            first_resp = await websocket.recv()\\n            subscription_id = first_resp[0].result\\n            while True:\\n                next_resp = await websocket.recv()\\n                print(next_resp)\\n            await websocket.logs_unsubscribe(subscription_id)\\n\", \"name\": \"Solana\"}", "created_at": null, "updated_at": 1754239007.5030587}