{"id": "155", "type": "class", "data": "{\"code_str\": \"class FolderView:\\n    def __init__(self, folder):\\n        self.folder = folder\\n        self.children = world.folders.get_children(self.folder['id'])\\n        self.name = z.ReactiveValue(self.make_name())\\n        self.focus = world.focus.add_child(self)\\n        self.name_input = z.Input(text=self.folder['name'] or '', focus_parent=self.focus)\\n        self.name_input.submitted.connect(self.name_submitted)\\n        actions = [\\n            ('create child', self.create_child_folder_triggered),\\n            ('delete', self.delete_triggered),\\n            ('reload', self.reload_children),\\n        ]\\n        self.actions_panel = z.ActionsPanel(actions, self.focus)\\n        self.row = z.Flex(children=[\\n            z.FlexChild(self.name_input.layout),\\n            z.FlexChild(self.actions_panel.layout),\\n        ])\\n\\n        self.list_view = z.ListView(self.children, focus_parent=self.focus, show_head=False, builder=self.item_builder)\\n\\n        self.column = z.Flex(xalign='largest', axis='y', children=[\\n            z.FlexChild(self.row.layout),\\n            z.FlexChild(self.list_view.layout)\\n        ])\\n        self.layout = self.column.layout\\n\\n    def make_name(self):\\n        return f'folder: {self.folder[\\\"name\\\"]} ({self.folder[\\\"id\\\"]})'\\n\\n    def item_builder(self, item, context):\\n        label = str(item)\\n        actions = []\\n        locator = world.locators.get_locator(item['locator_id'])\\n        label = f'({locator[\\\"item_type\\\"]}, {locator[\\\"item_id\\\"]}): '\\n        if locator['item_type'] == 'folder':\\n            folder = world.folders.get_folder(locator['item_id'])\\n            actions.append(('get', lambda item=item: world.floaties.add(z.FolderView(folder))))\\n            label += folder['name'] or ''\\n        elif locator['item_type'] == 'note':\\n            note = world.notes.get_note(locator['item_id'])\\n            actions.append(('get', lambda: world.floaties.add(z.EditNoteView(note))))\\n            label += z.truncate_string_with_ellipsis(note['text'], 10)\\n        return z.ContextButton(\\n            label=label, focus_parent=context['focus_parent'],\\n            actions=actions)\\n\\n    def reload_children(self):\\n        self.children = world.folders.get_children(self.folder['id'])\\n        self.list_view.set_items(self.children)\\n\\n    def create_child_folder_triggered(self):\\n        child_folder = world.folders.create_child_folder(self.folder['id'])\\n        self.reload_children()\\n\\n    def delete_triggered(self):\\n        world.folders.delete_folder(self.folder['id'])\\n        world.floaties.drop_obj(self)\\n\\n    def name_submitted(self):\\n        self.folder['name'] = self.name_input.text\\n        world.folders.update_name(self.folder['id'], self.folder['name'])\\n        self.name.set(self.make_name())\\n\\n    def drop(self):\\n        self.column.drop()\\n        self.row.drop()\\n        self.list_view.drop()\\n        self.name_input.drop()\\n        self.actions_panel.drop()\\n        self.focus.drop()\", \"name\": \"FolderView\"}", "created_at": null, "updated_at": 1754736945.474908}