{"id": "322", "type": "class", "data": "{\"code_str\": \"class BoxSelector:\\n    def __init__(self):\\n        self.active = False\\n        self.rectangle = None\\n\\n        self.exited = z.Signal()\\n        self.changed = z.Signal()\\n\\n    def start_selection(self):\\n        assert not self.active\\n        self.p1 = self.p2 = world.window.mouse_pos\\n        self.active = True\\n        self.rectangle = z.Rectangle(color=(0, 0, 0, 0.3))\\n        self.update_rectangle()\\n\\n    def stop_selection(self):\\n        assert self.active\\n        self.active = False\\n        self.rectangle.drop()\\n        del self.rectangle\\n        self.changed.emit((self.p1, self.p2))\\n\\n    def update_rectangle(self):\\n        u1 = world.unproject((*self.p1, 0.1))\\n        u2 = world.unproject((*self.p2, 0.1))\\n        self.rectangle.layout.position = np.array((u1[0], u1[1], u1[2]))\\n        self.rectangle.layout.size = np.array((u2[0] - u1[0], u2[1] - u1[1]))\\n        self.rectangle.layouter()\\n\\n    def on_mouse_button(self, button, action, mods):\\n        if button == sdl2.SDL_BUTTON_LEFT and action == 1 and not self.active:\\n            self.start_selection()\\n        elif self.active and button == sdl2.SDL_BUTTON_LEFT and action == 0:\\n            self.stop_selection()\\n\\n    def on_mouse_motion(self, x, y):\\n        if self.active:\\n            self.p2 = (x, y)\\n            self.update_rectangle()\\n\\n    def on_keyboard(self, key, scancode, action, mods):\\n        if action == 1 and key == sdl2.SDLK_ESCAPE:\\n            if self.active:\\n                self.stop_selection()\\n            self.exited.emit()\", \"name\": \"BoxSelector\"}", "created_at": null, "updated_at": 1754239007.501485}