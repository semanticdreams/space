{"id": "331", "type": "class", "data": "{\"code_str\": \"import os\\n\\n\\nclass Editor:\\n    def __init__(self, path):\\n        self.path = path\\n        self.changed = False\\n        self.name = z.ReactiveValue(self.make_name())\\n        self.focus = world.focus.add_child(self)\\n        self.input = z.Input(focus_parent=self.focus, multiline=True)\\n        self.input.submitted.connect(self.on_submitted)\\n        self.input.changed.connect(self.on_input_changed)\\n        self.layout = self.input.layout\\n\\n        with open(self.path) as f:\\n            self.content = f.read()\\n        self.input.set_text(self.content)\\n\\n    def make_name(self):\\n        return f'editor: {\\\"*\\\" if self.changed else \\\"\\\"}{os.path.basename(self.path)}'\\n\\n    def update_name(self):\\n        self.name.set(self.make_name())\\n\\n    def on_submitted(self):\\n        self.content = self.input.text\\n        with open(self.path, 'w') as f:\\n            f.write(self.content)\\n        self.changed = False\\n        self.update_name()\\n\\n    def on_input_changed(self, text):\\n        if text != self.content and not self.changed:\\n            self.changed = True\\n            self.update_name()\\n\\n    def drop(self):\\n        self.input.drop()\\n        self.focus.drop()\", \"name\": \"Editor\"}", "created_at": null, "updated_at": 1754239007.5044913}