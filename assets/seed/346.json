{"id": "346", "type": "class", "data": "{\"code_str\": \"from OpenGL.GL import *\\nfrom ctypes import sizeof, c_float, c_void_p, c_uint, string_at\\n\\n\\nclass TriangleRenderer:\\n    def __init__(self):\\n        self.program = world.shaders.build_program(world.shaders.find_shader('triangle.vert'),\\n                                                   world.shaders.find_shader('triangle.frag'))\\n\\n        self.projection_uniform = glGetUniformLocation(self.program, b'projection')\\n        self.view_uniform = glGetUniformLocation(self.program, b'view')\\n\\n        self.viewpos_uniform = glGetUniformLocation(self.program, b'viewPos')\\n        self.dirlight_direction_uniform = glGetUniformLocation(self.program, b'dirLight.direction')\\n        self.dirlight_ambient_uniform = glGetUniformLocation(self.program, b'dirLight.ambient')\\n        self.dirlight_diffuse_uniform = glGetUniformLocation(self.program, b'dirLight.diffuse')\\n        self.dirlight_specular_uniform = glGetUniformLocation(self.program, b'dirLight.specular')\\n\\n        glUseProgram(self.program)\\n        glUniform3f(self.dirlight_direction_uniform, 0.5, 0.2, 1.0)\\n        glUniform3f(self.dirlight_ambient_uniform, 0.4, 0.4, 0.4)\\n        glUniform3f(self.dirlight_diffuse_uniform, 0.6, 0.6, 0.6)\\n        glUniform3f(self.dirlight_specular_uniform, 1.0, 1.0, 1.0)\\n\\n        self.vao = glGenVertexArrays(1)\\n        self.vbo = glGenBuffers(1)\\n\\n        glBindVertexArray(self.vao)\\n        glBindBuffer(GL_ARRAY_BUFFER, self.vbo)\\n\\n        glEnableVertexAttribArray(0)\\n        glEnableVertexAttribArray(1)\\n        glEnableVertexAttribArray(2)\\n        stride = 8 * 4\\n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, stride, c_void_p(0))\\n        glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, stride, c_void_p(4 * 3))\\n        glVertexAttribPointer(2, 1, GL_INT, GL_FALSE, stride, c_void_p(4 * 7))\\n\\n    def render(self, view, projection, data, camera_position):\\n        glBindVertexArray(self.vao)\\n\\n        glBindBuffer(GL_ARRAY_BUFFER, self.vbo)\\n        glBufferData(GL_ARRAY_BUFFER, data.nbytes, data,\\n                     GL_STREAM_DRAW)\\n\\n        glUseProgram(self.program)\\n\\n        glUniformMatrix4fv(self.projection_uniform, 1, GL_FALSE, projection)\\n        glUniformMatrix4fv(self.view_uniform, 1, GL_FALSE, view)\\n\\n        cp = camera_position\\n        glUniform3f(self.viewpos_uniform, cp[0], cp[1], cp[2])\\n\\n        glDrawArrays(GL_TRIANGLES, 0, int(len(data) / 8))\\n\", \"name\": \"TriangleRenderer\"}", "created_at": null, "updated_at": 1754736945.4833748}