{"id": "415", "type": "class", "data": "{\"code_str\": \"import json\\n\\n\\nclass Entity:\\n    def __init__(self, type, id):\\n        self.type = type\\n        #self.item_id = item_id\\n        self.id = id\\n        #self.id = world.apps['Entities'].ensure_entity(type, item_id)['id']\\n        self.label = None\\n        self.color = np.asarray((0.2, 0.2, 0.4, 1))\\n        self.changed = z.Signal()\\n\\n    @classmethod\\n    def get(cls, id):\\n        return world.apps['Entities'].get_entity(id)\\n\\n    @classmethod\\n    def create(cls, type, data, id=None):\\n        return world.apps['Entities'].create_entity(type, data=json.dumps(data), id=id)\\n\\n    def save(self, emit_changed=True):\\n        with world.db:\\n            world.db.execute('update entities set type = ?, data = ?, updated_at = ? where id = ?',\\n                             (self.type, json.dumps(self.dump_data()), time.time(), self.id))\\n        if emit_changed:\\n            self.changed.emit()\\n\\n    def __init_subclass__(cls, **kwargs):\\n        super().__init_subclass__(**kwargs)\\n\\n        assert 'dump_data' in cls.__dict__\\n        #assert 'save' not in cls.__dict__\\n        #assert 'delete' not in cls.__dict__\\n\\n    def __str__(self):\\n        return '{}: {}'.format(self.type, self.id)\\n\\n    def update_id(self, id):\\n        world.apps['Entities'].update_id(self.id, id)\\n        self.id = id\\n\\n    def delete(self):\\n        world.apps['Entities'].delete_entity(self.id)\\n\\n    def copy(self):\\n        Y(self, 'entity')\\n\", \"name\": \"Entity\"}", "created_at": null, "updated_at": 1754736945.4727697}