{"id": "475", "type": "class", "data": "{\"code_str\": \"import ctypes\\nimport json\\nimport time\\nimport os\\nimport numpy as np\\n\\nimport sdl2\\nimport sdl2.ext\\nfrom sdl2 import video\\n\\nfrom OpenGL.GL import *\\nimport OpenGL.GLU as glu\\n\\n\\nclass Window:\\n    def __init__(self):\\n        self.mouse_pos = (0, 0)\\n        self.keys = set()\\n\\n        self.mouse_button = z.Signal()\\n        self.mouse_motion = z.Signal()\\n        self.scrolled = z.Signal()\\n        self.keyboard = z.Signal()\\n        self.keydown = z.Signal()\\n        self.character = z.Signal()\\n\\n        #glEnable(GL_DEPTH_TEST)\\n        #glDepthFunc(GL_LESS)\\n\\n        #glEnable(GL_BLEND)\\n        #glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)\\n        #glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA)\\n\\n        self.set_clear_color(json.loads(world.settings.get_value('window/clear_color') or '[0.1, 0.1, 0.2, 1.0]'))\\n\\n    def set_clear_color(self, color):\\n        self.clear_color = color\\n        glClearColor(*color)\\n        print(\\\"python set clear color\\\", color)\\n\\n    def clear(self):\\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)\\n\\n    def get_viewport(self):\\n        return np.array(glGetIntegerv(GL_VIEWPORT), 'i')\\n\\n    def get_clear_color(self):\\n        return np.array(glGetFloatv(GL_COLOR_CLEAR_VALUE), 'f')\\n\\n    def update_clear_color(self, color):\\n        self.set_clear_color(color)\\n        world.settings.set_value('window/clear_color', json.dumps(color))\\n\\n    def on_text_input(self, text):\\n        codepoint = ord(text)\\n        self.character.emit(codepoint)\\n\\n    #def handle_event(self, event):\\n    #    if event.type == sdl2.SDL_CONTROLLERBUTTONDOWN:\\n    #        world.gamepads[event.cbutton.which].button_down.emit(\\n    #            event.cbutton.button, event.cbutton.state, event.cbutton.timestamp)\\n    #    elif event.type == sdl2.SDL_CONTROLLERBUTTONUP:\\n    #        world.gamepads[event.cbutton.which].button_up.emit(\\n    #            event.cbutton.button, event.cbutton.state, event.cbutton.timestamp)\\n    #    elif event.type == sdl2.SDL_CONTROLLERAXISMOTION:\\n    #        world.gamepads[event.caxis.which].motion.emit(\\n    #            event.caxis.axis, event.caxis.value, event.caxis.timestamp)\\n    #    elif event.type == sdl2.SDL_CONTROLLERDEVICEADDED:\\n    #        world.gamepads.add(event.cdevice.which)\\n    #    elif event.type == sdl2.SDL_CONTROLLERDEVICEREMOVED:\\n    #        world.gamepads.remove(event.cdevice.which)\\n\", \"name\": \"Window\"}", "created_at": null, "updated_at": 1754239007.5033681}