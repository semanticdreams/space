{"id": "226", "type": "class", "data": "{\"code_str\": \"class SearchView:\\n    def __init__(self, items=None, builder=None, focus_parent=None, name='search-view', show_head=False,\\n                 num_per_page=10):\\n        self.show_head = show_head\\n        self.items = sorted(items, key=lambda x: x[1])\\n        self.submitted = z.Signal()\\n        self.query = ''\\n        self.focus = (focus_parent or world.focus).add_child(obj=self)\\n        self.input = z.Input(focus_parent=self.focus)\\n        self.input.submitted.connect(self.on_input_submitted)\\n        self.input.changed.connect(self.on_input_changed)\\n\\n        self.builder = builder or self.default_list_view_item_builder\\n\\n        if self.show_head:\\n            self.head = z.ContextButton(label=name, focus_parent=self.focus,\\n                                                color=(1, 0.5, 1, 1), focusable=False)\\n\\n        self.list_view = z.ListView(self.items, self.builder,\\n                                            num_per_page=num_per_page,\\n                                            focus_parent=self.focus,\\n                                            show_head=False)\\n\\n        row_objs = [z.FlexChild(self.input.layout),\\n                    z.FlexChild(self.list_view.layout, flex=1)]\\n        if self.show_head:\\n            row_objs.insert(0, z.FlexChild(self.head.layout))\\n        self.row = z.Flex(row_objs, axis='y', xalign='largest')\\n\\n        self.layout = self.row.layout\\n        if self.show_head:\\n            self.spatiolator = z.Spatiolator(self.layout,\\n                                                          self.head.spatiolator.handle)\\n\\n    def set_hud(self, hud):\\n        self.input.set_hud(hud)\\n        self.list_view.set_hud(hud)\\n        if self.head:\\n            self.head.set_hud(hud)\\n\\n    def default_list_view_item_builder(self, item, context=None):\\n        #b = z.Button(item[1], focus_parent=context['focus_parent'], on_click=lambda p, r, i, item=item: self.submitted.emit(item))\\n        b = z.ContextButton(label=item[1], focus_parent=context['focus_parent'], actions=[\\n            ('submit', lambda: self.submitted.emit(item))\\n        ])\\n        return b\\n\\n    def set_items(self, items):\\n        self.items = items\\n        self.update_list_view()\\n\\n    def update_list_view(self):\\n        self.list_view.set_items([x for x in self.items if util.fuzzy_match(self.query, x[1])])\\n\\n    def on_input_changed(self, value):\\n        self.query = value\\n        self.update_list_view()\\n\\n    def on_input_submitted(self):\\n        pass\\n\\n    def drop(self):\\n        if self.focus:\\n            self.focus.disconnect()\\n        self.row.drop()\\n        if self.show_head:\\n            self.head.drop()\\n        self.list_view.drop()\\n        self.input.drop()\\n        self.focus.drop()\\n\", \"name\": \"SearchView\"}", "created_at": null, "updated_at": 1754239007.505594}